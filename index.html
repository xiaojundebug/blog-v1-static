<!DOCTYPE html><html class="theme-next muse use-motion" lang="en"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=6.4.1" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.4.1"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.4.1"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.4.1"><link rel="mask-icon" href="/images/logo.svg?v=6.4.1" color="#222"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Muse",version:"6.4.1",sidebar:{position:"left",display:"post",offset:12,b2t:!1,scrollpercent:!1,onmobile:!0},fancybox:!1,fastclick:!1,lazyload:!1,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><meta name="keywords" content="xiaojun,blog"><meta property="og:type" content="website"><meta property="og:title" content="xiaojun&#39;s blog"><meta property="og:url" content="https://xiaojun1994.top/index.html"><meta property="og:site_name" content="xiaojun&#39;s blog"><meta property="og:locale" content="en"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="xiaojun&#39;s blog"><link rel="canonical" href="https://xiaojun1994.top/"><script type="text/javascript" id="page.configurations">CONFIG.page={sidebar:""}</script><title>xiaojun's blog</title><noscript><style type="text/css">.sidebar-inner,.use-motion .brand,.use-motion .collection-title,.use-motion .comments,.use-motion .menu-item,.use-motion .motion-element,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .logo,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" lang="en"><div class="container sidebar-position-left page-home"><div class="headband"></div> <a class="ribbon" href="https://github.com/xiaojun1994" target="_blank"><img style="position:absolute;top:0;right:0;border:0" src="/images/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"></a><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">xiaojun's blog</span><span class="logo-line-after"><i></i></span></a></div></div><div class="site-nav-toggle"> <button aria-label="Toggle navigation bar"><span class="btn-bar"></span><span class="btn-bar"></span><span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home menu-item-active"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>Home</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>Tags</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>Archives</a></li></ul></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><section id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://xiaojun1994.top/posts/5204488b.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="xiaojun1994"><meta itemprop="description" content><meta itemprop="image" content="/images/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="xiaojun's blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/posts/5204488b.html" itemprop="url">ç”¨travis-ciè‡ªåŠ¨åŒ–æ„å»ºéƒ¨ç½²github-pages</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">å‘è¡¨äº</span> <time title="Created: 2019-09-04 19:39:33" itemprop="dateCreated datePublished" datetime="2019-09-04T19:39:33+08:00">2019-09-04</time></span><div class="post-symbolscount"> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">å­—æ•°:</span> <span title="å­—æ•°">978</span></div></div></header><div class="post-body" itemprop="articleBody"><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>é‡æ–°æ£é¼“äº†å‡ å¤©ä»¥å‰ç»ƒæ‰‹æ‰€å†™çš„ä¸€ä¸ªåå°ç³»ç»Ÿï¼Œç”±äºæœ‰ä¸ªåœ¨çº¿é¢„è§ˆåŠŸèƒ½ä½¿ç”¨äº†Github Pagesï¼Œæ¯æ¬¡ push å‰éƒ½éœ€è¦ build ä¸€ä¸‹ï¼Œå¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥æƒ³æ­å»ºä¸€ä¸ª Jekinsã€GitLab Runnerï¼Œä½†æ˜¯å¥ˆä½• vps ç¡¬ä»¶ä¸ç»™åŠ›ï¼Œç´¢æ€§è¿˜æ˜¯ç”¨äº† Travis CIã€‚</p><h2 id="å…³è”-GitHub-å·¥ç¨‹"><a href="#å…³è”-GitHub-å·¥ç¨‹" class="headerlink" title="å…³è” GitHub å·¥ç¨‹"></a>å…³è” GitHub å·¥ç¨‹</h2><p>ç”¨ github æˆæƒç™»å½• travisï¼Œç„¶åæŠŠä½ æƒ³å…³è”çš„å·¥ç¨‹å¼€å…³æ‰“å¼€ï¼ˆå…è´¹ç‰ˆåªèƒ½ç”¨åœ¨ github å…¬å…±ä»“åº“ä¸­ï¼Œç§æœ‰ä»“åº“ä¸è¡Œï¼‰</p><h2 id="ç¼–å†™-travis-yml"><a href="#ç¼–å†™-travis-yml" class="headerlink" title="ç¼–å†™ .travis.yml"></a>ç¼–å†™ .travis.yml</h2><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># .travis.yml</span></span><br><span class="line"><span class="comment"># see https://docs.travis-ci.com/user/deployment/pages/</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">node_js</span></span><br><span class="line"><span class="attr">node_js:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="number">10</span></span><br><span class="line"><span class="attr">install:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">yarn</span></span><br><span class="line"><span class="attr">script:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">unset</span> <span class="string">CI</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">yarn</span> <span class="string">build</span></span><br><span class="line"><span class="attr">cache:</span> <span class="string">yarn</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line"><span class="attr">  provider:</span> <span class="string">pages</span></span><br><span class="line"><span class="attr">  local_dir:</span> <span class="string">build</span></span><br><span class="line"><span class="attr">  skip_cleanup:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">  keep_history:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">  github_token:</span> <span class="string">$GITHUB_TOKEN</span></span><br><span class="line"><span class="attr">  on:</span></span><br><span class="line"><span class="attr">    branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure><p><code>$GITHUB_TOKEN</code> æŒ‡è®¾ç½®é‡Œçš„ <code>Environment Variables</code>ï¼Œå®ƒéœ€è¦ä¸€ä¸ª github personal access tokens<br><img src="https://s2.ax1x.com/2019/09/04/nZGZad.jpg" alt="nZGZad.jpg"></p><p>ä½¿ç”¨ github ç”Ÿæˆ token: æ‰“å¼€ <a href="https://github.com/settings/tokens" target="_blank" rel="noopener">https://github.com/settings/tokens</a> -&gt; Generate new token -&gt; éšä¾¿å¡«ä¸€ä¸ªåå­—ï¼Œå‹¾é€‰ repo å¹¶ä¿å­˜ï¼Œè®°å¥½ tokenï¼Œåªèƒ½çœ‹ä¸€æ¬¡<br><img src="https://s2.ax1x.com/2019/09/04/nZG3qg.jpg" alt="nZG3qg.jpg"></p><h2 id="æ–°å»º-gh-pages-åˆ†æ”¯"><a href="#æ–°å»º-gh-pages-åˆ†æ”¯" class="headerlink" title="æ–°å»º gh-pages åˆ†æ”¯"></a>æ–°å»º gh-pages åˆ†æ”¯</h2><p>ç”±äºå®ƒé»˜è®¤ä¼š push åˆ° <code>gh-pages</code> åˆ†æ”¯ï¼Œåˆ†æ”¯ä¸å­˜åœ¨ä¼šæ„å»ºå¤±è´¥ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ‰‹åŠ¨æ–°å»ºä¸€ä¸ªè¿™ä¸ªåˆ†æ”¯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git checkout --orphan gh-pages</span><br><span class="line">git rm -rf .</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'# new branch'</span> &gt;&gt; README.md</span><br><span class="line"></span><br><span class="line">git add README.md</span><br><span class="line">git commit -m <span class="string">'new branch'</span></span><br></pre></td></tr></table></figure><h2 id="æ£€éªŒ"><a href="#æ£€éªŒ" class="headerlink" title="æ£€éªŒ"></a>æ£€éªŒ</h2><p>push ä¸€ä¸‹ï¼Œç¨ç­‰ç‰‡åˆ»æµè§ˆå™¨ä¸­ä¾¿ä¼šæ‰“å°æ„å»ºä¿¡æ¯</p><p><img src="https://s2.ax1x.com/2019/09/04/nZBbBq.jpg" alt="nZBbBq.jpg"></p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://xiaojun1994.top/posts/f35688ba.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="xiaojun1994"><meta itemprop="description" content><meta itemprop="image" content="/images/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="xiaojun's blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/posts/f35688ba.html" itemprop="url">è®°å½•ä¸€ä¸‹Reactç®€æ˜“åå°ç®¡ç†ç³»ç»Ÿæ­å»ºè¿‡ç¨‹</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">å‘è¡¨äº</span> <time title="Created: 2019-09-01 00:18:36" itemprop="dateCreated datePublished" datetime="2019-09-01T00:18:36+08:00">2019-09-01</time></span><div class="post-symbolscount"> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">å­—æ•°:</span> <span title="å­—æ•°">13k</span></div></div></header><div class="post-body" itemprop="articleBody"><p>æœ€è¿‘é‡æ–°å­¦äº†ä¸€ä¸‹ react æŠ€æœ¯æ ˆï¼Œé¡ºä¾¿é‡æ„äº†å»å¹´ä¸€ä¸ªç®¡ç†åå°ï¼Œä¸å¾—ä¸è¯´å‰ç«¯å˜åŒ–å®åœ¨æ˜¯å¤ªå¿«äº†ï¼Œå‡ ä¸ªæœˆæ²¡ç”¨ react ä»£ç éƒ½å¿«çœ‹ä¸æ‡‚äº†ã€‚</p><p>æºç åœ°å€ ğŸ‘‰<a href="https://github.com/xiaojun1994/react-admin-lite" target="_blank" rel="noopener">https://github.com/xiaojun1994/react-admin-lite</a></p><h2 id="ğŸŒµ-æŠ€æœ¯æ ˆ"><a href="#ğŸŒµ-æŠ€æœ¯æ ˆ" class="headerlink" title="ğŸŒµ æŠ€æœ¯æ ˆ"></a>ğŸŒµ æŠ€æœ¯æ ˆ</h2><p>åŸºäº cra ts ç‰ˆ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npx create-react-app my-app --typescript</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">yarn create react-app my-app --typescript</span><br></pre></td></tr></table></figure><ul><li>react + hooks</li><li>react-router</li><li>mobx</li><li>typescript</li><li>antd</li><li>mockjs</li></ul><h2 id="ğŸ­-éœ€æ±‚åˆ†æ"><a href="#ğŸ­-éœ€æ±‚åˆ†æ" class="headerlink" title="ğŸ­ éœ€æ±‚åˆ†æ"></a>ğŸ­ éœ€æ±‚åˆ†æ</h2><ul><li>antd æŒ‰éœ€å¼•å…¥</li><li>æŒ‰é…ç½®æ–‡ä»¶è‡ªåŠ¨åˆ›å»ºèœå•</li><li>è·¯ç”±æ‡’åŠ è½½</li><li>å¿…é¡»ç™»å½•æ‰èƒ½è®¿é—®ï¼Œå¦‚æœæ²¡ç™»å½•ç›´æ¥é‡å®šå‘åˆ°ç™»å½•é¡µé¢</li><li>è®¿é—®äº†ä¸€ä¸ªä¸å­˜åœ¨çš„è·¯ç”±è·³è½¬åˆ° 404 é¡µé¢</li><li>å®ç°è·¯ç”±çº§åˆ«å’ŒæŒ‰é’®çº§åˆ«çš„æƒé™æ§åˆ¶ï¼Œæ ¹æ®ç™»å½•ç”¨æˆ·å±•ç¤ºå¯¹åº”èœå•</li><li>ä½¿ç”¨ mock æ•°æ®</li><li>mobx çŠ¶æ€æŒä¹…åŒ–ï¼Œé¿å…åˆ·æ–°ä¸¢å¤±çŠ¶æ€</li></ul><h2 id="ğŸº-ç›®å½•"><a href="#ğŸº-ç›®å½•" class="headerlink" title="ğŸº ç›®å½•"></a>ğŸº ç›®å½•</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â”œâ”€â”€ config-overrides.js         rewiredé…ç½®</span><br><span class="line">â”œâ”€â”€ global.d.ts                 å­˜æ”¾ä¸€äº›tså…¨å±€å£°æ˜</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ public</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ favicon.ico</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ index.html</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ logo192.png</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ logo512.png</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ manifest.json</span><br><span class="line">â”‚Â Â  â””â”€â”€ robots.txt</span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ App.test.tsx</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ App.tsx</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ Layout                  å­˜æ”¾å¸ƒå±€ç»„ä»¶</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ assets                  å­˜æ”¾ä¸€äº›å›¾ç‰‡èµ„æº</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ common                  å­˜æ”¾ä¸€äº›å…¬å…±å˜é‡ã€æ–¹æ³•ç­‰</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ components              å­˜æ”¾å…¬å…±ç»„ä»¶</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ config                  å­˜æ”¾ä¸€äº›é…ç½®æ–‡ä»¶</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ index.less</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ index.tsx</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ mock                    å­˜æ”¾mockæ•°æ®</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ pages</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ plugins                 å®é™…ä¸Šå°±æ”¾äº†ä¸€ä¸ªå°è£…åçš„axios</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ react-app-env.d.ts</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ serviceWorker.ts</span><br><span class="line">â”‚Â Â  â””â”€â”€ store                   mobxä»“åº“</span><br><span class="line">â”œâ”€â”€ tsconfig.json</span><br><span class="line">â””â”€â”€ yarn.lock</span><br></pre></td></tr></table></figure><h2 id="ğŸ¬-æŒ‰éœ€å¼•å…¥-antd"><a href="#ğŸ¬-æŒ‰éœ€å¼•å…¥-antd" class="headerlink" title="ğŸ¬ æŒ‰éœ€å¼•å…¥ antd"></a>ğŸ¬ æŒ‰éœ€å¼•å…¥ antd</h2><p>å…ˆå®‰è£…è¿™å‡ ä¸ªä¾èµ– <code>babel-plugin-import</code> <code>customize-cra</code> <code>less</code> <code>less-loader</code> <code>react-app-rewired</code></p><p>æ ¹ç›®å½•ä¸‹æ–°å»º <code>config-overrides.js</code> å¹¶å†™å…¥ä»¥ä¸‹å†…å®¹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// config-overrides.js</span></span><br><span class="line"><span class="keyword">const</span> &#123; override, fixBabelImports, addLessLoader, addDecoratorsLegacy &#125; = <span class="built_in">require</span>(<span class="string">'customize-cra'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = override(</span><br><span class="line">  fixBabelImports(<span class="string">'import'</span>, &#123;</span><br><span class="line">    libraryName: <span class="string">'antd'</span>,</span><br><span class="line">    libraryDirectory: <span class="string">'es'</span>,</span><br><span class="line">    style: <span class="literal">true</span></span><br><span class="line">  &#125;),</span><br><span class="line">  addLessLoader(&#123;</span><br><span class="line">    javascriptEnabled: <span class="literal">true</span>,</span><br><span class="line">    modifyVars: &#123;</span><br><span class="line">      <span class="string">'@primary-color'</span>: <span class="string">'#8994DF'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;),</span><br><span class="line">  addDecoratorsLegacy() <span class="comment">// é…ç½®ä»¥å…è®¸ä½¿ç”¨è£…é¥°å™¨</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>ç„¶ååˆ«å¿˜äº†æ”¹ä¸€ä¸‹ <code>package.json</code></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// ...</span><br><span class="line">"scripts": &#123;</span><br><span class="line">    "start": "react-app-rewired start",</span><br><span class="line">    "build": "react-app-rewired build",</span><br><span class="line">    "test": "react-app-rewired test",</span><br><span class="line">    "eject": "react-scripts eject"</span><br><span class="line">&#125;</span><br><span class="line">// ...</span><br></pre></td></tr></table></figure><h2 id="ğŸ€-ç™»å½•æ§åˆ¶"><a href="#ğŸ€-ç™»å½•æ§åˆ¶" class="headerlink" title="ğŸ€ ç™»å½•æ§åˆ¶"></a>ğŸ€ ç™»å½•æ§åˆ¶</h2><p>æ²¡ç™»å½•è‡ªåŠ¨è·³åˆ°ç™»å½•é¡µé¢ï¼Œè¿™ä¸ªåŠŸèƒ½é€šè¿‡å°è£… <code>Route</code> ç»„ä»¶å®ç°ï¼Œè®©æˆ‘ä»¬å…ˆæä¸ª <code>AuthRoute</code>ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">// src/components/AuthRoute</span><br><span class="line">import React, &#123; useContext &#125; from &apos;react&apos;</span><br><span class="line">import &#123; Route, Redirect, RouteProps &#125; from &apos;react-router-dom&apos;</span><br><span class="line">import * as stores from &apos;../../store&apos;</span><br><span class="line"></span><br><span class="line">type PickRequired&lt;T, K extends keyof T&gt; = T &amp; Required&lt;Pick&lt;T, K&gt;&gt;</span><br><span class="line"></span><br><span class="line">const AuthRoute: React.FC&lt;PickRequired&lt;RouteProps, &apos;component&apos;&gt;&gt; = props =&gt; &#123;</span><br><span class="line">  const &#123; isLogged &#125; = useContext(stores.userStore)</span><br><span class="line">  const &#123; component: Component, ...rest &#125; = props</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;Route</span><br><span class="line">      &#123;...rest&#125;</span><br><span class="line">      render=&#123;props =&gt; &#123;</span><br><span class="line">        return isLogged ? &lt;Component &#123;...props&#125; /&gt; : &lt;Redirect to=&quot;/login&quot; /&gt;</span><br><span class="line">      &#125;&#125;</span><br><span class="line">    /&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default AuthRoute</span><br></pre></td></tr></table></figure><h2 id="âš½ï¸-æŒ‰é…ç½®æ–‡ä»¶è‡ªåŠ¨ç”Ÿæˆèœå•"><a href="#âš½ï¸-æŒ‰é…ç½®æ–‡ä»¶è‡ªåŠ¨ç”Ÿæˆèœå•" class="headerlink" title="âš½ï¸ æŒ‰é…ç½®æ–‡ä»¶è‡ªåŠ¨ç”Ÿæˆèœå•"></a>âš½ï¸ æŒ‰é…ç½®æ–‡ä»¶è‡ªåŠ¨ç”Ÿæˆèœå•</h2><p><em>ä»¥ä¸‹æ•™ç¨‹ä¼šé€šè¿‡ <code>lazy</code> <code>Suspense</code> è®¾ç½®è·¯ç”±æ‡’åŠ è½½</em></p><h3 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// global.d.ts</span></span><br><span class="line"><span class="keyword">interface</span> IMenu &#123;</span><br><span class="line">  name: <span class="built_in">string</span> <span class="comment">// èœå•å</span></span><br><span class="line">  key: <span class="built_in">string</span> <span class="comment">// èœå•å¯¹åº”è·¯ç”±</span></span><br><span class="line">  icon?: <span class="built_in">string</span> <span class="comment">// èœå•å›¾æ ‡</span></span><br><span class="line">  component?: React.ComponentType&lt;<span class="built_in">any</span>&gt; <span class="comment">// èœå•è·¯ç”±å¯¹åº”é¡µé¢</span></span><br><span class="line">  children?: IMenu[] <span class="comment">// å­èœå•</span></span><br><span class="line">  permissions?: Permission[] <span class="comment">// èœå•æƒé™</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// src/config/menus.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; lazy &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> menus: IMenu[] = [</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">'åˆä½œå•†æˆ·'</span>,</span><br><span class="line">    key: <span class="string">'/information'</span>,</span><br><span class="line">    icon: <span class="string">'user'</span>,</span><br><span class="line">    component: lazy(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'../pages/Information'</span>)),</span><br><span class="line">    permissions: [<span class="string">'admin'</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">'è®¢å•æŸ¥è¯¢'</span>,</span><br><span class="line">    key: <span class="string">'/order-query'</span>,</span><br><span class="line">    icon: <span class="string">'file-text'</span>,</span><br><span class="line">    component: lazy(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'../pages/OrderQuery'</span>)),</span><br><span class="line">    permissions: [<span class="string">'admin'</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">'äº¤æ˜“æŸ¥è¯¢'</span>,</span><br><span class="line">    key: <span class="string">'/trade-query'</span>,</span><br><span class="line">    icon: <span class="string">'pay-circle'</span>,</span><br><span class="line">    component: lazy(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'../pages/TradeQuery'</span>)),</span><br><span class="line">    permissions: [<span class="string">'admin'</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">'æŠ¥è¡¨å¯¼å‡º'</span>,</span><br><span class="line">    key: <span class="string">'/reports'</span>,</span><br><span class="line">    icon: <span class="string">'upload'</span>,</span><br><span class="line">    component: lazy(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'../pages/Reports'</span>)),</span><br><span class="line">    permissions: [<span class="string">'admin'</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">'ä¸€çº§èœå•'</span>,</span><br><span class="line">    key: <span class="string">'/level1'</span>,</span><br><span class="line">    icon: <span class="string">'man'</span>,</span><br><span class="line">    children: [</span><br><span class="line">      &#123;</span><br><span class="line">        name: <span class="string">'äºŒçº§èœå•'</span>,</span><br><span class="line">        key: <span class="string">'/level2'</span>,</span><br><span class="line">        icon: <span class="string">'woman'</span>,</span><br><span class="line">        children: [</span><br><span class="line">          &#123;</span><br><span class="line">            name: <span class="string">'ä¸‰çº§èœå•'</span>,</span><br><span class="line">            key: <span class="string">'/level3'</span>,</span><br><span class="line">            icon: <span class="string">'api'</span>,</span><br><span class="line">            component: lazy(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'../pages/Hello'</span>))</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">'æƒé™æµ‹è¯•'</span>,</span><br><span class="line">    key: <span class="string">'/permission'</span>,</span><br><span class="line">    icon: <span class="string">'medicine-box'</span>,</span><br><span class="line">    component: lazy(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'../pages/Permission'</span>))</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> menus</span><br></pre></td></tr></table></figure><h3 id="å°è£…-Menus-ç»„ä»¶"><a href="#å°è£…-Menus-ç»„ä»¶" class="headerlink" title="å°è£… Menus ç»„ä»¶"></a>å°è£… Menus ç»„ä»¶</h3><p>Menus ç»„ä»¶è´Ÿè´£æ ¹æ®é…ç½®æ–‡ä»¶é€’å½’ç”Ÿæˆä¾§è¾¹èœå•</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">// src/components/Menus</span><br><span class="line">import React from &apos;react&apos;</span><br><span class="line">import &#123; Icon, Menu &#125; from &apos;antd&apos;</span><br><span class="line">import &#123; ClickParam &#125; from &apos;antd/lib/menu&apos;</span><br><span class="line">import &#123; withRouter, RouteComponentProps &#125; from &apos;react-router-dom&apos;</span><br><span class="line">import menus from &apos;../../config/menus&apos;</span><br><span class="line">import &#123; usePermission &#125; from &apos;../../common/hooks&apos;</span><br><span class="line"></span><br><span class="line">const Menus: React.FC&lt;RouteComponentProps&gt; = props =&gt; &#123;</span><br><span class="line">  const &#123; location, history &#125; = props</span><br><span class="line">  const hasPermission = usePermission()</span><br><span class="line"></span><br><span class="line">  function handleNavClick(&#123; key &#125;: ClickParam) &#123;</span><br><span class="line">    history.push(key)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function hasChild(menu: any) &#123;</span><br><span class="line">    return Array.isArray(menu.children) &amp;&amp; menu.children.length &gt; 0</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function genSubMenu(menu: any) &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;Menu.SubMenu</span><br><span class="line">        title=&#123;</span><br><span class="line">          &lt;span&gt;</span><br><span class="line">            &#123;menu.icon &amp;&amp; &lt;Icon type=&#123;menu.icon&#125; /&gt;&#125;</span><br><span class="line">            &lt;span&gt;&#123;menu.name&#125;&lt;/span&gt;</span><br><span class="line">          &lt;/span&gt;</span><br><span class="line">        &#125;</span><br><span class="line">        key=&#123;menu.key&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        &#123;genMenus(menu.children)&#125;</span><br><span class="line">      &lt;/Menu.SubMenu&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function genMenItem(menu: any) &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;Menu.Item key=&#123;menu.key&#125;&gt;</span><br><span class="line">        &#123;menu.icon &amp;&amp; &lt;Icon type=&#123;menu.icon&#125; /&gt;&#125;</span><br><span class="line">        &lt;span&gt;&#123;menu.name&#125;&lt;/span&gt;</span><br><span class="line">      &lt;/Menu.Item&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function genMenus(menus: any) &#123;</span><br><span class="line">    return menus.reduce((prev: any, next: any) =&gt; &#123;</span><br><span class="line">      return prev.concat(</span><br><span class="line">        hasChild(next)</span><br><span class="line">          ? hasPermission(next) &amp;&amp; genSubMenu(next)</span><br><span class="line">          : hasPermission(next) &amp;&amp; genMenItem(next)</span><br><span class="line">      )</span><br><span class="line">    &#125;, [])</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;Menu theme=&quot;dark&quot; mode=&quot;inline&quot; selectedKeys=&#123;[location.pathname]&#125; onClick=&#123;handleNavClick&#125;&gt;</span><br><span class="line">      &#123;genMenus(menus)&#125;</span><br><span class="line">    &lt;/Menu&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default withRouter(Menus)</span><br></pre></td></tr></table></figure><h3 id="å°è£…-Content-ç»„ä»¶"><a href="#å°è£…-Content-ç»„ä»¶" class="headerlink" title="å°è£… Content ç»„ä»¶"></a>å°è£… Content ç»„ä»¶</h3><p>Content ç»„ä»¶è´Ÿè´£æ ¹æ®é…ç½®æ–‡ä»¶é€’å½’ç”Ÿæˆè·¯ç”±</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">// src/components/Content</span><br><span class="line">import React, &#123; Suspense &#125; from &apos;react&apos;</span><br><span class="line">import &#123; Layout, Spin &#125; from &apos;antd&apos;</span><br><span class="line">import &#123; Switch &#125; from &apos;react-router-dom&apos;</span><br><span class="line">import AuthRoute from &apos;../AuthRoute&apos;</span><br><span class="line">import menus from &apos;../../config/menus&apos;</span><br><span class="line">import NoMatch from &apos;../../pages/404&apos;</span><br><span class="line">import &#123; usePermission &#125; from &apos;../../common/hooks&apos;</span><br><span class="line"></span><br><span class="line">const Content: React.FC = props =&gt; &#123;</span><br><span class="line">  const hasPermission = usePermission()</span><br><span class="line"></span><br><span class="line">  function hasChild(menu: any) &#123;</span><br><span class="line">    return Array.isArray(menu.children) &amp;&amp; menu.children.length &gt; 0</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function genRoute(menu: any) &#123;</span><br><span class="line">    if (!menu.component) return null</span><br><span class="line">    return &lt;AuthRoute path=&#123;menu.key&#125; component=&#123;menu.component&#125; key=&#123;menu.key&#125; /&gt;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function genRoutes(menus: any) &#123;</span><br><span class="line">    return menus.reduce((prev: any, next: any) =&gt; &#123;</span><br><span class="line">      return prev.concat(</span><br><span class="line">        hasChild(next)</span><br><span class="line">          ? hasPermission(next) &amp;&amp; genRoutes(next.children)</span><br><span class="line">          : hasPermission(next) &amp;&amp; genRoute(next)</span><br><span class="line">      )</span><br><span class="line">    &#125;, [])</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;Layout.Content</span><br><span class="line">      style=&#123;&#123;</span><br><span class="line">        margin: &apos;24px&apos;</span><br><span class="line">      &#125;&#125;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;Suspense</span><br><span class="line">        fallback=&#123;</span><br><span class="line">          &lt;div style=&#123;&#123; textAlign: &apos;center&apos;, marginTop: &apos;50px&apos; &#125;&#125;&gt;</span><br><span class="line">            &lt;Spin tip=&quot;Loading...&quot; /&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &#125;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;Switch&gt;</span><br><span class="line">          &#123;genRoutes(menus)&#125;</span><br><span class="line">          &lt;AuthRoute component=&#123;NoMatch&#125; /&gt;</span><br><span class="line">        &lt;/Switch&gt;</span><br><span class="line">      &lt;/Suspense&gt;</span><br><span class="line">    &lt;/Layout.Content&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default Content</span><br></pre></td></tr></table></figure><h2 id="ğŸš-æŒ‰é’®çº§åˆ«æƒé™æ§åˆ¶"><a href="#ğŸš-æŒ‰é’®çº§åˆ«æƒé™æ§åˆ¶" class="headerlink" title="ğŸš æŒ‰é’®çº§åˆ«æƒé™æ§åˆ¶"></a>ğŸš æŒ‰é’®çº§åˆ«æƒé™æ§åˆ¶</h2><p>ä¸Šé¢æˆ‘ä»¬å·²ç»å®ç°äº†èœå•çº§åˆ«æƒé™æ§åˆ¶ï¼Œä½†æ˜¯è¿™è¿˜ä¸å¤Ÿï¼Œå¯èƒ½æœ‰æ—¶å€™è¿˜éœ€è¦æŒ‰é’®çº§åˆ«æƒé™æ§åˆ¶</p><h3 id="è‡ªå®šä¹‰-hooks"><a href="#è‡ªå®šä¹‰-hooks" class="headerlink" title="è‡ªå®šä¹‰ hooks"></a>è‡ªå®šä¹‰ hooks</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// src/common/hooks.tsx</span><br><span class="line">import React, &#123; useContext &#125; from &apos;react&apos;</span><br><span class="line">import &#123; userStore &#125; from &apos;../store&apos;</span><br><span class="line"></span><br><span class="line">// ...</span><br><span class="line"></span><br><span class="line">// å¤„ç†æŒ‰é’®çº§åˆ«æƒé™ï¼Œç±»ä¼¼é«˜é˜¶ç»„ä»¶</span><br><span class="line">function useAuthComponent(...permissions: Permission[]) &#123;</span><br><span class="line">  const &#123; userinfo &#125; = useContext(userStore)</span><br><span class="line">  const hasPermission = permissions.includes(userinfo.permission)</span><br><span class="line"></span><br><span class="line">  return &lt;P extends &#123;&#125;&gt;(BaseComponent: React.ComponentType&lt;P&gt;): React.FC&lt;P&gt; =&gt; props =&gt;</span><br><span class="line">    hasPermission ? &lt;BaseComponent &#123;...props&#125; /&gt; : null</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export &#123; usePermission, useAuthComponent &#125;</span><br></pre></td></tr></table></figure><p><em>è¿™ä¸ª hooks æˆ‘å°è£…çš„ä¸æ˜¯å¾ˆå¥½ï¼Œä»¥åçœ‹èƒ½å¦ä¼˜åŒ–</em></p><h3 id="ä½¿ç”¨æ•™ç¨‹"><a href="#ä½¿ç”¨æ•™ç¨‹" class="headerlink" title="ä½¿ç”¨æ•™ç¨‹"></a>ä½¿ç”¨æ•™ç¨‹</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import React from &apos;react&apos;</span><br><span class="line">import &#123; Button &#125; from &apos;antd&apos;</span><br><span class="line">import &#123; observer &#125; from &apos;mobx-react-lite&apos;</span><br><span class="line">import &#123; useAuthComponent &#125; from &apos;../common/hooks&apos;</span><br><span class="line"></span><br><span class="line">const Permission: React.FC = props =&gt; &#123;</span><br><span class="line">  // @ts-ignore æŸäº›ç»„ä»¶ä¼šæŠ¥é”™ï¼Œå¿½ç•¥å®ƒ</span><br><span class="line">  const AuthButton = useAuthComponent(&apos;admin&apos;)(Button)</span><br><span class="line"></span><br><span class="line">  return &lt;AuthButton type=&quot;primary&quot;&gt;æƒé™ä¸ºadminè¯¥æŒ‰é’®æ‰æ˜¾ç¤º&lt;/AuthButton&gt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default observer(Permission)</span><br></pre></td></tr></table></figure><h2 id="ğŸ‰-ä½¿ç”¨-mock-æ•°æ®"><a href="#ğŸ‰-ä½¿ç”¨-mock-æ•°æ®" class="headerlink" title="ğŸ‰ ä½¿ç”¨ mock æ•°æ®"></a>ğŸ‰ ä½¿ç”¨ mock æ•°æ®</h2><p>éœ€è¦å®‰è£… <code>mockjs</code></p><p>ç®€å•ç¤ºä¾‹ï¼Œå…·ä½“è¯·ç§»æ­¥å®˜ç½‘</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Mock <span class="keyword">from</span> <span class="string">'mockjs'</span></span><br><span class="line"></span><br><span class="line">Mock.setup(&#123;</span><br><span class="line">  <span class="comment">// æ¨¡æ‹Ÿå»¶è¿Ÿï¼ˆ200-600æ¯«ç§’ä¹‹é—´ï¼‰</span></span><br><span class="line">  timeout: <span class="string">'200-600'</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">Mock.mock(<span class="regexp">/login/</span>, <span class="function">(<span class="params">val: <span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> isAdmin = val.url.match(<span class="regexp">/admin/</span>)</span><br><span class="line">  <span class="keyword">return</span> isAdmin</span><br><span class="line">    ? &#123;</span><br><span class="line">        t: &#123;</span><br><span class="line">          account: <span class="string">'admin@xxx.com'</span>,</span><br><span class="line">          name: <span class="string">'admin'</span>,</span><br><span class="line">          permission: <span class="string">'admin'</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    : &#123;</span><br><span class="line">        t: &#123;</span><br><span class="line">          account: <span class="string">'guest@xxx.com'</span>,</span><br><span class="line">          name: <span class="string">'guest'</span>,</span><br><span class="line">          permission: <span class="string">'guest'</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">Mock.mock(<span class="regexp">/getMerchantInfo/</span>, &#123;</span><br><span class="line">  t: &#123;</span><br><span class="line">    <span class="string">'account|3-8'</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        name: <span class="string">'@cname'</span>,</span><br><span class="line">        account: <span class="string">'@email'</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">'product|5-10'</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">'productId|5'</span>: <span class="regexp">/\d/</span>,</span><br><span class="line">        <span class="string">'productType|1'</span>: [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>],</span><br><span class="line">        <span class="string">'status|0-1'</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">'road|5-10'</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            name: <span class="string">'æµ‹è¯•å•†æˆ·'</span>,</span><br><span class="line">            roadCode: <span class="regexp">/10021\d&#123;6&#125;/</span>,</span><br><span class="line">            <span class="string">'status|0-1'</span>: <span class="number">0</span></span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">Mock.mock(<span class="regexp">/order-query/</span>, &#123;</span><br><span class="line">  t: &#123;&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">Mock.mock(<span class="regexp">/trade-query/</span>, &#123;</span><br><span class="line">  <span class="string">'t|10'</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">'id|+1'</span>: <span class="number">0</span>,</span><br><span class="line">      merOrderNo: <span class="regexp">/\d&#123;12&#125;/</span>,</span><br><span class="line">      payOrderId: <span class="regexp">/\d&#123;12&#125;/</span>,</span><br><span class="line">      roadCode: <span class="regexp">/10021\d&#123;6&#125;/</span>,</span><br><span class="line">      merName: <span class="string">'@word()'</span>,</span><br><span class="line">      <span class="string">'amount|10-10000.2-2'</span>: <span class="number">10</span>,</span><br><span class="line">      <span class="string">'status|1'</span>: [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>],</span><br><span class="line">      createTime: <span class="string">"@date('yyyy-MM-dd hh:mm:ss')"</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ä¹‹ååœ¨ App.tsx å¼•å…¥å®ƒå³å¯</p><h2 id="ğŸ¤¡-mobx-æŒä¹…åŒ–å­˜å‚¨"><a href="#ğŸ¤¡-mobx-æŒä¹…åŒ–å­˜å‚¨" class="headerlink" title="ğŸ¤¡ mobx æŒä¹…åŒ–å­˜å‚¨"></a>ğŸ¤¡ mobx æŒä¹…åŒ–å­˜å‚¨</h2><h3 id="å¾ˆç®€é™‹ï¼Œå‡‘åˆç”¨"><a href="#å¾ˆç®€é™‹ï¼Œå‡‘åˆç”¨" class="headerlink" title="å¾ˆç®€é™‹ï¼Œå‡‘åˆç”¨"></a>å¾ˆç®€é™‹ï¼Œå‡‘åˆç”¨</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/common/utils.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; autorun &#125; <span class="keyword">from</span> <span class="string">'mobx'</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * mobx çŠ¶æ€æŒä¹…åŒ–</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> is_first_run = <span class="literal">true</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mobxPersist</span>&lt;<span class="title">T</span>, <span class="title">K</span> <span class="title">extends</span> <span class="title">keyof</span> <span class="title">T</span>&gt;(<span class="params">store: T, fields: K[]</span>): <span class="title">T</span> </span>&#123;</span><br><span class="line">  autorun(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    fields.forEach(<span class="function"><span class="params">field</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (is_first_run) &#123;</span><br><span class="line">        <span class="keyword">const</span> data = <span class="built_in">window</span>.sessionStorage.getItem(field <span class="keyword">as</span> <span class="built_in">string</span>)</span><br><span class="line">        data &amp;&amp; (store[field] = <span class="built_in">JSON</span>.parse(data))</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">window</span>.sessionStorage.setItem(field <span class="keyword">as</span> <span class="built_in">string</span>, <span class="built_in">JSON</span>.stringify(store[field]))</span><br><span class="line">    &#125;)</span><br><span class="line">    is_first_run = <span class="literal">false</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> store</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; mobxPersist &#125;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨æ•™ç¨‹-1"><a href="#ä½¿ç”¨æ•™ç¨‹-1" class="headerlink" title="ä½¿ç”¨æ•™ç¨‹"></a>ä½¿ç”¨æ•™ç¨‹</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createContext &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; observable, action, computed &#125; <span class="keyword">from</span> <span class="string">'mobx'</span></span><br><span class="line"><span class="keyword">import</span> &#123; mobxPersist &#125; <span class="keyword">from</span> <span class="string">'../../common/utils'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> UserStore &#123;</span><br><span class="line">  <span class="meta">@observable</span> userinfo: <span class="built_in">any</span> = &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@action</span></span><br><span class="line">  saveUserinfo = <span class="function">(<span class="params">data: <span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.userinfo = data</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@computed</span></span><br><span class="line">  <span class="keyword">get</span> isLogged() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.keys(<span class="keyword">this</span>.userinfo).length &gt; <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@action</span></span><br><span class="line">  cleanUserinfo = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.userinfo = &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> createContext(mobxPersist(<span class="keyword">new</span> UserStore(), [<span class="string">'userinfo'</span>]))</span><br></pre></td></tr></table></figure><h2 id="ğŸŒ-ç»“å°¾"><a href="#ğŸŒ-ç»“å°¾" class="headerlink" title="ğŸŒ ç»“å°¾"></a>ğŸŒ ç»“å°¾</h2><p>æš‚æ—¶å†™è¿™ä¹ˆå¤šï¼Œæ„Ÿè§‰è¿˜æœ‰å¾ˆå¤§ä¼˜åŒ–ç©ºé—´ï¼Œç­‰æˆ‘æ…¢æ…¢å®Œå–„ï¼Œts ç»™æˆ‘æ„Ÿè§‰å°±åƒè‡­è±†è…ä¸€æ ·ï¼Œé—»ç€è‡­ï¼Œåƒç€è¿˜è¡Œ~ğŸ¤–</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://xiaojun1994.top/posts/93f7cf6a.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="xiaojun1994"><meta itemprop="description" content><meta itemprop="image" content="/images/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="xiaojun's blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/posts/93f7cf6a.html" itemprop="url">ä¸€äº›iTerm2å¸¸è§é—®é¢˜</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">å‘è¡¨äº</span> <time title="Created: 2019-06-26 22:52:29" itemprop="dateCreated datePublished" datetime="2019-06-26T22:52:29+08:00">2019-06-26</time></span><div class="post-symbolscount"> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">å­—æ•°:</span> <span title="å­—æ•°">96</span></div></div></header><div class="post-body" itemprop="articleBody"><p><em>1. è§£å†³ no matches found é—®é¢˜</em><br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"setopt no_nomatch"</span> &gt;&gt; ~/.zshrc &amp;&amp; <span class="built_in">source</span> ~/.zshrc</span><br></pre></td></tr></table></figure><p></p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://xiaojun1994.top/posts/43b36ae9.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="xiaojun1994"><meta itemprop="description" content><meta itemprop="image" content="/images/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="xiaojun's blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/posts/43b36ae9.html" itemprop="url">æ€æ ·è®¾ç½®SSHä»£ç†</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">å‘è¡¨äº</span> <time title="Created: 2019-06-12 13:19:45" itemprop="dateCreated datePublished" datetime="2019-06-12T13:19:45+08:00">2019-06-12</time></span><div class="post-symbolscount"> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">å­—æ•°:</span> <span title="å­—æ•°">550</span></div></div></header><div class="post-body" itemprop="articleBody"><p>ç”±äºæœ¬äººæœåŠ¡å™¨ ip è¢«å°ï¼Œå¯¼è‡´å›½å†…æ— æ³•ç›´è¿ï¼Œåªå¥½è®¾ç½®ä»£ç†è¿æ¥äº† f**kâ€¼ï¸</p><h2 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h2><p>åœ¨ç³»ç»Ÿ <code>.ssh</code> ç›®å½•ä¸‹ç¼–è¾‘ <code>config</code> æ–‡ä»¶ï¼ˆæ²¡æœ‰å°±æ–°å»ºä¸€ä¸ªï¼‰ï¼Œè·¯å¾„ä¸€èˆ¬æ˜¯ <code>C:\Users\xxx\.ssh</code>ï¼Œå…¶ä¸­ <code>xxx</code> ä¸ºä½ ç”µè„‘ç”¨æˆ·å</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Host x.x.x.x</span><br><span class="line">  ProxyCommand connect -S 127.0.0.1:xxxx %h %p</span><br></pre></td></tr></table></figure><h2 id="macOS"><a href="#macOS" class="headerlink" title="macOS"></a>macOS</h2><p>ç¼–è¾‘ <code>~/.ssh/config</code> æ–‡ä»¶ï¼ˆæ²¡æœ‰å°±æ–°å»ºä¸€ä¸ªï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Host x.x.x.x</span><br><span class="line">	ProxyCommand nc -x 127.0.0.1:xxxx %h %p</span><br></pre></td></tr></table></figure><h2 id="ç»“å°¾"><a href="#ç»“å°¾" class="headerlink" title="ç»“å°¾"></a>ç»“å°¾</h2><p>ã€‚ã€‚</p><p>ã€‚ã€‚</p><p>ã€‚ã€‚</p><p>å†è®°å½•ä¸€ä¸‹ git è®¾ç½® http ä»£ç†æ–¹å¼å§ï¼Œé€šè¿‡å‘½ä»¤å³å¯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git config --global http.proxyÂ <span class="string">'http://127.0.0.1:1080'</span></span><br><span class="line">git config --global https.proxyÂ <span class="string">'http://127.0.0.1:1080'</span></span><br><span class="line">git config --global http.proxyÂ <span class="string">'socks5://127.0.0.1:1080'</span></span><br><span class="line">git config --global https.proxyÂ <span class="string">'socks5://127.0.0.1:1080'</span></span><br></pre></td></tr></table></figure><p><em>å…·ä½“è®¾ç½®è§†ä½ æƒ…å†µè€Œå®š</em></p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://xiaojun1994.top/posts/77ae3463.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="xiaojun1994"><meta itemprop="description" content><meta itemprop="image" content="/images/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="xiaojun's blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/posts/77ae3463.html" itemprop="url">v2rayæ­å»ºæµç¨‹</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">å‘è¡¨äº</span> <time title="Created: 2019-06-11 10:15:39" itemprop="dateCreated datePublished" datetime="2019-06-11T10:15:39+08:00">2019-06-11</time></span><div class="post-symbolscount"> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">å­—æ•°:</span> <span title="å­—æ•°">1.1k</span></div></div></header><div class="post-body" itemprop="articleBody"><p>ä½¿ç”¨ v2ray ä¸€é”®è„šæœ¬</p><p><a href="https://github.com/233boy/v2ray/wiki" target="_blank" rel="noopener">https://github.com/233boy/v2ray/wiki</a></p><p>æ¨èä½¿ç”¨ Cloudflare ä¸­è½¬ V2Ray æµé‡ï¼Œè¿™é‡Œè¯´ä¿©æ³¨é‡ç‚¹</p><ul><li><p>Cloudflare æ˜¯éœ€è¦åŸŸåçš„ï¼Œæ¨èä¸€ä¸ªç”³è¯·å…è´¹åŸŸåçš„ç½‘ç«™ <a href="https://www.freenom.com" target="_blank" rel="noopener">https://www.freenom.com</a></p></li><li><p>å…³äº Caddy å¯åŠ¨å¤±è´¥çš„é—®é¢˜ï¼Œæ˜¯å› ä¸º Caddy ä¸ Nginx æœ‰å†²çªï¼Œä½ å¯ä»¥æŠ›å¼ƒ Caddy è€Œä½¿ç”¨ Nginxï¼Œæ”¾ä¸€ä»½æˆ‘çš„é…ç½®</p></li></ul><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>                    <span class="number">443</span>;</span><br><span class="line">    <span class="attribute">server_name</span>               xiaojun1994.cf; <span class="comment"># åˆšæ‰ç”³è¯·çš„åŸŸå</span></span><br><span class="line">    <span class="attribute">ssl</span>                       <span class="literal">on</span>;</span><br><span class="line">    <span class="attribute">ssl_certificate</span>           /srv/ssl/2332201_xiaojun1994.cf.pem;</span><br><span class="line">    <span class="attribute">ssl_certificate_key</span>       /srv/ssl/2332201_xiaojun1994.cf.key;</span><br><span class="line">    <span class="attribute">ssl_ciphers</span>               ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;</span><br><span class="line">    <span class="attribute">ssl_protocols</span>             TLSv1 TLSv1.<span class="number">1</span> TLSv1.<span class="number">2</span>;</span><br><span class="line">    <span class="attribute">ssl_prefer_server_ciphers</span> <span class="literal">on</span>;</span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_pass</span>            http://localhost:45018; <span class="comment"># è¿™å„¿å¡«ä¸ºä½  v2ray ç«¯å£ï¼ŒæŸ¥çœ‹æ–¹æ³•ï¼švim /etc/v2ray/config.json -&gt; inbounds -&gt; port</span></span><br><span class="line">        <span class="attribute">proxy_http_version</span>    <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span>      Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span>      Connection <span class="string">"upgrade"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><em>ssl ç”³è¯·æ–¹æ³•è¯·æŸ¥çœ‹<a href="/posts/8ae1c1bd.html">è¿™ç¯‡æ–‡ç« </a></em></p><h2 id="ç»“å°¾"><a href="#ç»“å°¾" class="headerlink" title="ç»“å°¾"></a>ç»“å°¾</h2><p>æ™šä¸Š v2ray ç›¸æ¯” ss è¿˜æ˜¯è¦æ…¢ä¸€ç‚¹ï¼Œä¸è¿‡ç¨³å®šå°±å¥½ï¼Œå› ä¸ºå¥—äº† cdn çš„åŸå› ï¼Œä½ æœåŠ¡å™¨ ip è¢«å°äº†ä»ç„¶è¿˜èƒ½ç”¨ ğŸ¶~</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://xiaojun1994.top/posts/13337c2f.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="xiaojun1994"><meta itemprop="description" content><meta itemprop="image" content="/images/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="xiaojun's blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/posts/13337c2f.html" itemprop="url">ä½¿ç”¨yumå¿«é€Ÿå®‰è£…æœ€æ–°ç‰ˆnodejs</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">å‘è¡¨äº</span> <time title="Created: 2019-05-13 16:50:25" itemprop="dateCreated datePublished" datetime="2019-05-13T16:50:25+08:00">2019-05-13</time></span><div class="post-symbolscount"> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">å­—æ•°:</span> <span title="å­—æ•°">158</span></div></div></header><div class="post-body" itemprop="articleBody"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -sL https://rpm.nodesource.com/setup_10.x | bash -</span><br><span class="line">sudo yum install -y nodejs</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå‘½ä»¤ä»£è¡¨æˆ‘æƒ³å®‰è£… Node10 æœ€æ–°ç‰ˆæœ¬ï¼Œæ›´å¤šç‰ˆæœ¬å‚è§ <a href="https://github.com/nodesource/distributions" target="_blank" rel="noopener">https://github.com/nodesource/distributions</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://xiaojun1994.top/posts/fa3efcda.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="xiaojun1994"><meta itemprop="description" content><meta itemprop="image" content="/images/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="xiaojun's blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/posts/fa3efcda.html" itemprop="url">è§„èŒƒåŒ–Gitåˆä½œæµç¨‹</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">å‘è¡¨äº</span> <time title="Created: 2019-03-11 17:07:47" itemprop="dateCreated datePublished" datetime="2019-03-11T17:07:47+08:00">2019-03-11</time></span><div class="post-symbolscount"> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">å­—æ•°:</span> <span title="å­—æ•°">3.5k</span></div></div></header><div class="post-body" itemprop="articleBody"><h2 id="Commitizen"><a href="#Commitizen" class="headerlink" title="Commitizen"></a>Commitizen</h2><p>çºµè§‚é‚£äº› GitHub ä¸Š star å¾ˆå¤šçš„å¼€æºåº“ï¼Œå¼€å‘æµç¨‹éƒ½æ˜¯æå…¶è§„èŒƒçš„ï¼Œ<a href="https://github.com/commitizen/cz-cli" target="_blank" rel="noopener">Commitizen</a> ä¾¿æ˜¯ç”¨æ¥è§„èŒƒåŒ– git æäº¤ä¿¡æ¯çš„ä¸€ä¸ªå¥½å·¥å…·ã€‚</p><div class="img-container" data-caption="Vue çš„ commit message"><img src="https://s2.ax1x.com/2019/03/12/AP2yb6.png" alt="AP2yb6.png"></div><p><code>commitizen</code> é€šå¸¸è¦ä¸é€‚é…å™¨ä¸€èµ·ä½¿ç”¨ï¼Œé€šä¿—ç‚¹æ¥è¯´æ˜¯éœ€è¦ä¸€ä¸ª commit message æ¨¡æ¿ï¼Œç›®å‰ä¸»æµçš„æ˜¯ç¬¦åˆ Angular è§„èŒƒçš„ <code>cz-conventional-changelog</code>ã€‚</p><h3 id="âœ¨-å®‰è£…"><a href="#âœ¨-å®‰è£…" class="headerlink" title="âœ¨ å®‰è£…"></a>âœ¨ å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm i -g commitizen</span><br><span class="line">npm i -g cz-conventional-changelog</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'&#123; "path": "cz-conventional-changelog" &#125;'</span> &gt; ~/.czrc</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå‘½ä»¤ä»£è¡¨å…¨å±€ä½¿ç”¨ <code>cz-conventional-changelog</code> é€‚é…å™¨ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥å±€éƒ¨å®‰è£…é€‚é…å™¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿™ç§æ–¹å¼æ˜¯ä½¿ç”¨npmæ¥å®‰è£…</span></span><br><span class="line">commitizen init cz-conventional-changelog --save-dev --save-exact</span><br><span class="line"><span class="comment"># è¿™ç§æ–¹å¼æ˜¯ä½¿ç”¨yarnæ¥å®‰è£…</span></span><br><span class="line">commitizen init cz-conventional-changelog --yarn --dev --exact</span><br></pre></td></tr></table></figure><p>å‡å¦‚ä½ å·²ç»å…¨å±€å®‰è£…äº†é€‚é…å™¨ï¼Œé‚£ä¹ˆä¸Šé¢çš„å‘½ä»¤ä¼šæŠ¥ <em>A previous adapter is already configured. Use â€“force to override</em>ï¼Œå¦‚å®ƒæ‰€è¯´ï¼Œåªéœ€è¦åŠ ä¸Š <code>--force</code> å‚æ•°å³å¯å¼ºåˆ¶ä½¿ç”¨å±€éƒ¨é€‚é…å™¨ï¼ŒæˆåŠŸåä¼šåœ¨æœ¬åœ°å±€éƒ¨å®‰è£… <code>cz-conventional-changelog</code>ï¼Œå¹¶åœ¨ <code>package.json</code> ä¸­å†™å…¥ä»¥ä¸‹å†…å®¹</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"cz-conventional-changelog"</span>: <span class="string">"^2.1.0"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"config"</span>: &#123;</span><br><span class="line">    <span class="attr">"commitizen"</span>: &#123;</span><br><span class="line">      <span class="attr">"path"</span>: <span class="string">"./node_modules/cz-conventional-changelog"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ğŸ‰-ä½¿ç”¨"><a href="#ğŸ‰-ä½¿ç”¨" class="headerlink" title="ğŸ‰ ä½¿ç”¨"></a>ğŸ‰ ä½¿ç”¨</h3><p>å®‰è£…æˆåŠŸåå³å¯é€šè¿‡å‘½ä»¤ <code>git-cz</code> æ¥ä»£æ›¿ <code>git commit</code> è¿›è¡Œæäº¤äº†</p><p><img src="https://s2.ax1x.com/2019/03/12/AP6OPJ.png" alt="AP6OPJ.png"></p><p><em><code>git-cz</code> å…·æœ‰ <code>git commit</code> ä¸€åˆ‡å‚æ•°ï¼Œå°±åƒè¿™æ ·ï¼š <code>git-cz -a</code></em></p><p><code>VSCode</code> ç”¨æˆ·å¯ä»¥å®‰è£…ä¸€ä¸ª <a href="https://marketplace.visualstudio.com/items?itemName=KnisterPeter.vscode-commitizen" target="_blank" rel="noopener">Visual Studio Code Commitizen Support</a> æ‰©å±•ä»¥ä½¿ç”¨æ›´å‹å¥½çš„ commit ç•Œé¢ï¼Œ<br>æŒ‰ä¸‹ <code>F1</code>ï¼Œè¾“å…¥ <code>conventional commit</code>ï¼Œæ•ˆæœå¦‚ä¸‹</p><p><img src="https://s2.ax1x.com/2019/03/12/APgNpd.png" alt="APgNpd.png">æ ¹æ®æ­¥éª¤æ“ä½œå°± ok äº†ã€‚</p><hr><h2 id="Standard-Version"><a href="#Standard-Version" class="headerlink" title="Standard Version"></a>Standard Version</h2><h3 id="ğŸˆ-ç”¨é€”"><a href="#ğŸˆ-ç”¨é€”" class="headerlink" title="ğŸˆ ç”¨é€”"></a>ğŸˆ ç”¨é€”</h3><ul><li>è‡ªåŠ¨å‡çº§ <em>version</em></li><li>è‡ªåŠ¨ç”Ÿæˆ <em>changelog</em></li><li>è‡ªåŠ¨æ‰“ <em>tag</em></li></ul><p><em>æ¯æ¬¡æ›´æ–°ç‰ˆæœ¬åä¼šè‡ªåŠ¨å°† <code>package.json(et al.)</code> å’Œ <code>CHANGELOG.md</code> æäº¤</em></p><div class="note warning"><p>å¿…é¡»ç¡®ä¿ Commit Message ç¬¦åˆ <a href="https://conventionalcommits.org/" target="_blank" rel="noopener">Conventional Commits</a> è§„èŒƒå“¦ï¼ä¸Šé¢ä½¿ç”¨çš„ <code>cz-conventional-changelog</code> æ˜¯ç¬¦åˆè¿™ä¸ªè§„èŒƒçš„ã€‚</p></div><div class="img-container" data-caption="ä½¿ç”¨ Standard Version è‡ªåŠ¨ç”Ÿæˆçš„ changelog"><img src="https://s2.ax1x.com/2019/03/12/Ai9KgJ.png" alt="Ai9KgJ.png"></div><h3 id="ğŸ„-å®‰è£…"><a href="#ğŸ„-å®‰è£…" class="headerlink" title="ğŸ„ å®‰è£…"></a>ğŸ„ å®‰è£…</h3><p>è¿™é‡Œæˆ‘é€‰æ‹©å…¨å±€å®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -g standard-version</span><br></pre></td></tr></table></figure><p>æ–¹ä¾¿èµ·è§ï¼Œé¦–å…ˆæ–°å¢ä¸€ä¸ª npm run script</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">  <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"release"</span>: <span class="string">"standard-version"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ğŸ€-å‘å¸ƒç¬¬ä¸€ç‰ˆ"><a href="#ğŸ€-å‘å¸ƒç¬¬ä¸€ç‰ˆ" class="headerlink" title="ğŸ€ å‘å¸ƒç¬¬ä¸€ç‰ˆ"></a>ğŸ€ å‘å¸ƒç¬¬ä¸€ç‰ˆ</h3><p>å‘å¸ƒç¬¬ä¸€ç‰ˆæ—¶è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œè¿™æ¡å‘½ä»¤ä¸ä¼šä¿®æ”¹ç‰ˆæœ¬å·</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm run release -- -f</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">standard-version -f</span><br></pre></td></tr></table></figure><h3 id="ğŸ-å‡çº§ä¸€ä¸ªç‰ˆæœ¬"><a href="#ğŸ-å‡çº§ä¸€ä¸ªç‰ˆæœ¬" class="headerlink" title="ğŸ å‡çº§ä¸€ä¸ªç‰ˆæœ¬"></a>ğŸ å‡çº§ä¸€ä¸ªç‰ˆæœ¬</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm run release</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">standard-version</span><br></pre></td></tr></table></figure><h3 id="ğŸ¨-ç”Ÿæˆä¸€ä¸ªé¢„å‘å¸ƒç‰ˆæœ¬"><a href="#ğŸ¨-ç”Ÿæˆä¸€ä¸ªé¢„å‘å¸ƒç‰ˆæœ¬" class="headerlink" title="ğŸ¨ ç”Ÿæˆä¸€ä¸ªé¢„å‘å¸ƒç‰ˆæœ¬"></a>ğŸ¨ ç”Ÿæˆä¸€ä¸ªé¢„å‘å¸ƒç‰ˆæœ¬</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm run release -- -p</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">standard-version -p</span><br></pre></td></tr></table></figure><p>ä¼šå¾—åˆ°ä¸€ä¸ªç±»ä¼¼ <code>1.0.1-0</code> <code>1.0.1-1</code> â€¦ è¿™ç§ç‰ˆæœ¬<br>å¦‚æœå¸Œæœ›ä¸ºé¢„å‘å¸ƒç‰ˆæœ¬å‘½åï¼Œå¯ä»¥é€šè¿‡ <code>--prerelease &lt;name&gt;</code> æŒ‡å®šåç§°ã€‚<br>ä¾‹å¦‚ï¼Œå‡è®¾æ‚¨çš„é¢„å‘è¡Œç‰ˆåº”è¯¥åŒ…å« alpha å‰ç¼€</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm run release -- -p alpha</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">standard-version -p alpha</span><br></pre></td></tr></table></figure><p>è¿™å°†å¾—åˆ°ä¸€ä¸ª <code>1.0.1-alpha.0</code> ç‰ˆæœ¬</p><h3 id="ğŸ-æ‰‹åŠ¨é€‰æ‹©ç‰ˆæœ¬"><a href="#ğŸ-æ‰‹åŠ¨é€‰æ‹©ç‰ˆæœ¬" class="headerlink" title="ğŸ æ‰‹åŠ¨é€‰æ‹©ç‰ˆæœ¬"></a>ğŸ æ‰‹åŠ¨é€‰æ‹©ç‰ˆæœ¬</h3><div class="img-container" data-caption="Semver è¯­ä¹‰åŒ–ç‰ˆæœ¬å·"><img src="https://s2.ax1x.com/2019/03/12/APXW0U.png" alt="APXW0U.png"></div><p><code>standard-version</code> éµå¾ª <a href="https://semver.org/" target="_blank" rel="noopener">Semver</a> è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒï¼Œå‡å¦‚ä½ ä¸Šæ¬¡ commit æ—¶é€‰æ‹©çš„æ˜¯ <code>fix</code>ï¼Œè¿™æ—¶é»˜è®¤åº”è¯¥æ›´æ–°çš„æ˜¯ä¸ª <code>path</code> ç‰ˆæœ¬ï¼Œå¦‚æœä½ æƒ³æ‰‹åŠ¨é€‰æ‹©ç‰ˆæœ¬ï¼Œå¯ä»¥è¿™æ ·</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm run release -- -r minor</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">standard-version -r 1.1.0</span><br></pre></td></tr></table></figure><h3 id="ğŸ€-é˜»æ­¢-Git-Hooks"><a href="#ğŸ€-é˜»æ­¢-Git-Hooks" class="headerlink" title="ğŸ€ é˜»æ­¢ Git Hooks"></a>ğŸ€ é˜»æ­¢ Git Hooks</h3><p>å½“ release åï¼Œç¨‹åºä¼šè‡ªåŠ¨å°†ä¿®æ”¹åçš„ <code>package.json</code> å’Œ <code>CHANGELOG.md</code> æ–‡ä»¶ commit æ‰ï¼Œæ‰€ä»¥å½“ä½¿ç”¨ <code>pre-commit</code> è¿™ç§é’©å­æ—¶å€™å¯èƒ½å°±ä¼šæŠ¥é”™ï¼Œå¯ä»¥é€šè¿‡ <code>--no-verify</code> è·³è¿‡æ£€æµ‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm run release -- --no-verify</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">standard-version -n</span><br></pre></td></tr></table></figure><h3 id="ğŸ”«-ç”Ÿå‘½å‘¨æœŸè„šæœ¬"><a href="#ğŸ”«-ç”Ÿå‘½å‘¨æœŸè„šæœ¬" class="headerlink" title="ğŸ”« ç”Ÿå‘½å‘¨æœŸè„šæœ¬"></a>ğŸ”« ç”Ÿå‘½å‘¨æœŸè„šæœ¬</h3><p><code>standard-version</code> æ”¯æŒä¸€äº›ç”Ÿå‘½å‘¨æœŸè„šæœ¬</p><ul><li><code>prerelease</code>: å‘å¸ƒä¹‹å‰</li><li><code>prebump / postbump</code>: ç‰ˆæœ¬å·æ›´æ–°ä¹‹å‰ / ä¹‹å</li><li><code>prechangelog / postchangelog</code>: changelog ç”Ÿæˆä¹‹å‰ / ä¹‹å</li><li><code>precommit / postcommit</code>: package.json å’Œ changelog æ–‡ä»¶æäº¤ä¹‹å‰ / æäº¤ä¹‹å</li><li><code>pretag / posttag</code>: æ‰“ tag ä¹‹å‰ / ä¹‹å</li></ul><p>å°±åƒè¿™æ ·ï¼Œä½ å¯ä»¥åœ¨æŸä¸ªå£°æ˜å‘¨æœŸä¸­å·æ‘¸åšç‚¹äº‹æƒ… ğŸ¤¡</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"standard-version"</span>: &#123;</span><br><span class="line">    <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">      <span class="attr">"prebump"</span>: <span class="string">"echo 9.9.9"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>changelog</code> ä¸­ issue åœ°å€é»˜è®¤æ˜¯ GitHub ä¸Šçš„ï¼Œå¦‚æœæƒ³ä¿®æ”¹æˆ <code>Jira</code> çš„åœ°å€ï¼Œå¯ä»¥é€šè¿‡ <code>postchangelog</code> é…åˆ <a href="https://www.npmjs.com/package/replace" target="_blank" rel="noopener">replace</a> åº“æ¥ä¿®æ”¹å®ƒçš„é“¾æ¥åœ°å€</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"standard-version"</span>: &#123;</span><br><span class="line">    <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">      <span class="attr">"postchangelog"</span>: <span class="string">"replace 'https://github.com/myproject/issues/' 'https://myjira/browse/' CHANGELOG.md"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½ ä¹Ÿå¯ä»¥è·³è¿‡æŸäº›ç”Ÿå‘½å‘¨æœŸ (<code>bump</code>, <code>changelog</code>, <code>commit</code>, <code>tag</code>) ï¼Œå‡å¦‚ä¸æƒ³å®ƒè‡ªåŠ¨æ‰“ <code>tag</code>ï¼Œä½ å¯ä»¥è¿™æ ·</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"standard-version"</span>: &#123;</span><br><span class="line">    <span class="attr">"skip"</span>: &#123;</span><br><span class="line">      <span class="attr">"tag"</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ğŸ -Tag-å‰ç¼€"><a href="#ğŸ -Tag-å‰ç¼€" class="headerlink" title="ğŸ  Tag å‰ç¼€"></a>ğŸ  Tag å‰ç¼€</h3><p>é»˜è®¤æ‰“çš„ tag å‰ç¼€æ˜¯ vï¼Œç”Ÿæˆçš„ tag éƒ½æ˜¯ç±»ä¼¼ v1.0.0 è¿™ç§ï¼Œå¯ä»¥é€šè¿‡ <code>-t</code> è®¾ç½®å‰ç¼€</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm run release -- -t @scope/package\@</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">standard-version -t @scope/package\@</span><br></pre></td></tr></table></figure><p>ç”Ÿæˆçš„ tag çœ‹èµ·æ¥åƒè¿™æ · <code>@scope/package@2.0.0</code></p><h3 id="ğŸ˜Š-å¸®åŠ©"><a href="#ğŸ˜Š-å¸®åŠ©" class="headerlink" title="ğŸ˜Š å¸®åŠ©"></a>ğŸ˜Š å¸®åŠ©</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm run release -- -h</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">standard-version -h</span><br></pre></td></tr></table></figure><hr><h2 id="æ›´å¤š"><a href="#æ›´å¤š" class="headerlink" title="æ›´å¤š"></a>æ›´å¤š</h2><p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥åˆ©ç”¨ <code>husky</code> + <code>prettier</code> <code>eslint</code> <code>commitlint</code> <code>lint-staged</code> ç­‰å·¥å…·è¿›ä¸€æ­¥ä¼˜åŒ– git æµç¨‹ï¼Œåˆ©ç”¨ <code>husky</code> çš„ <code>pre-commit</code> é’©å­ï¼Œå¯ä»¥åœ¨ commit ä¹‹å‰å¤„ç†ä¸€äº›äº‹æƒ…ï¼Œå°±åƒ</p><ul><li><em>ä»£ç æ ¼å¼åŒ–</em></li><li><em>ä»£ç æ ¡éªŒ</em></li><li><em>Commit Message æ ¡éªŒ</em></li><li><em>â€¦</em></li></ul></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://xiaojun1994.top/posts/70e342df.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="xiaojun1994"><meta itemprop="description" content><meta itemprop="image" content="/images/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="xiaojun's blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/posts/70e342df.html" itemprop="url">åˆ¤æ–­addEventListeneræ˜¯å¦æ”¯æŒpassiveå±æ€§</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">å‘è¡¨äº</span> <time title="Created: 2018-12-03 21:01:27" itemprop="dateCreated datePublished" datetime="2018-12-03T21:01:27+08:00">2018-12-03</time></span><div class="post-symbolscount"> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">å­—æ•°:</span> <span title="å­—æ•°">945</span></div></div></header><div class="post-body" itemprop="articleBody"><h2 id="å†™æ³•"><a href="#å†™æ³•" class="headerlink" title="å†™æ³•"></a>å†™æ³•</h2><p>å…ˆçœ‹ä¸€ä¸‹ MDN ç°åœ¨ <code>addEventListener</code> çš„å†™æ³•ï¼Œä¼ å‚å˜æˆäº†è¿™æ ·ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">target.addEventListener(type, listener, &#123; <span class="attr">capture</span>: <span class="built_in">Boolean</span>, <span class="attr">passive</span>: <span class="built_in">Boolean</span>, <span class="attr">once</span>: <span class="built_in">Boolean</span> &#125;)</span><br></pre></td></tr></table></figure><p>ä»¥å‰ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ä¸€ä¸ª Boolean å€¼ï¼Œå®ƒå†³å®šæ˜¯å¦ä¸ºæ•è·æ¨¡å¼ï¼Œç°åœ¨å¯ä»¥ä¼ å…¥ä¸€ä¸ªå¯¹è±¡äº†</p><ul><li>capture: åŒä»¥å‰ä¸€æ ·ï¼Œè¡¨ç¤º listener æ˜¯åœ¨æ•è·é˜¶æ®µæ‰§è¡Œè¿˜æ˜¯å†’æ³¡é˜¶æ®µæ‰§è¡Œ</li><li>passive: è¡¨ç¤º listener æ°¸è¿œä¸ä¼šè°ƒç”¨ preventDefault()ã€‚</li><li>once: è¡¨ç¤º listener åªä¼šè°ƒç”¨ä¸€æ¬¡ã€‚</li></ul><h2 id="ç”¨å¤„"><a href="#ç”¨å¤„" class="headerlink" title="ç”¨å¤„"></a>ç”¨å¤„</h2><p>çœ‹ä¸Šå»æ‡µæ‡µçš„ï¼Œå…¶å®ï¼Œæ€»ç»“ä¸€ä¸‹å°±æ˜¯ <code>passive</code> ä¸»è¦æ˜¯ä¸ºäº†ä¼˜åŒ–æ»‘åŠ¨æ€§èƒ½è€Œç”Ÿï¼Œå½“ <code>passive</code> è®¾ç½®ä¸º <code>true</code> æ—¶ï¼Œä¼šå‘Šè¯‰æµè§ˆå™¨ä½ çš„ listener ä¸­ä¸ä¼šè°ƒç”¨ <code>preventDefault()</code> è¿™ä¸ªæ–¹æ³•ï¼Œä»è€Œæµè§ˆå™¨ä¼šåšä¸€ç³»åˆ—ä¼˜åŒ–æ¥æå‡æ»‘åŠ¨ä½“éªŒï¼Œä»è€Œä½¿æ»‘åŠ¨æ›´é¡ºç•…</p><h2 id="ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å®ƒ"><a href="#ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å®ƒ" class="headerlink" title="ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å®ƒ"></a>ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å®ƒ</h2><p>å½“ä½ çš„ listener ä¸­ä¸ä¼šè°ƒç”¨ <code>preventDefault()</code> æ–¹æ³•æ—¶ï¼Œéƒ½å°½é‡ä½¿ç”¨å®ƒï¼Œå¦‚æœä½ è®¾ç½®äº† <code>passive</code> ä¸º <code>true</code> å¹¶ä¸”ä½ ä»£ç ä¸­è¿˜è°ƒç”¨äº† <code>preventDefault()</code> æ–¹æ³•ï¼Œé‚£ä¹ˆæµè§ˆå™¨ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯</p><h2 id="ä¸å…¼å®¹æ€ä¹ˆåŠ"><a href="#ä¸å…¼å®¹æ€ä¹ˆåŠ" class="headerlink" title="ä¸å…¼å®¹æ€ä¹ˆåŠ"></a>ä¸å…¼å®¹æ€ä¹ˆåŠ</h2><p>è¿™ä¸ªå±æ€§å‡ºæ¥çš„æ¯”è¾ƒæ™šï¼Œå…¼å®¹æ€§ä¸å¤ªå¥½ï¼Œæ€ä¹ˆæ£€æµ‹æµè§ˆå™¨æ˜¯å¦æ”¯æŒè¯¥å±æ€§å‘¢ï¼Ÿè¿™é‡Œæœ‰ä¸ªæ–¹æ³•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> passiveSupported = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">var</span> options = <span class="built_in">Object</span>.defineProperty(&#123;&#125;, <span class="string">'passive'</span>, &#123;</span><br><span class="line">    <span class="keyword">get</span>: function() &#123;</span><br><span class="line">      passiveSupported = <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="built_in">window</span>.addEventListener(<span class="string">'test'</span>, <span class="literal">null</span>, options)</span><br><span class="line">&#125; <span class="keyword">catch</span> (err) &#123;&#125;</span><br></pre></td></tr></table></figure><p>å½“æµè§ˆå™¨æ”¯æŒè¯¥å±æ€§æ—¶ <code>passiveSupported</code> ä¼šè¢«èµ‹å€¼ä¸º <code>true</code>ï¼Œè¿™æ®µä»£ç ç®€ç›´æ˜¯é…·åˆ°æ²¡æœ‹å‹ ğŸ‘½</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://xiaojun1994.top/posts/73bc7195.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="xiaojun1994"><meta itemprop="description" content><meta itemprop="image" content="/images/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="xiaojun's blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/posts/73bc7195.html" itemprop="url">å¦‚ä½•æ¨¡æ‹Ÿç§»åŠ¨ç«¯è§¦æ‘¸äº‹ä»¶</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">å‘è¡¨äº</span> <time title="Created: 2018-11-20 13:45:48" itemprop="dateCreated datePublished" datetime="2018-11-20T13:45:48+08:00">2018-11-20</time></span><div class="post-symbolscount"> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">å­—æ•°:</span> <span title="å­—æ•°">5.2k</span></div></div></header><div class="post-body" itemprop="articleBody"><p>ä¸€ç›´ä¸ç†è§£ä¸ºä»€ä¹ˆ vant-ui çš„ pc ç«¯æ–‡æ¡£å³ä¾§ demo å¯ä»¥å“åº” touch äº‹ä»¶ï¼Œæ¯”å¦‚å®ƒçš„<a href="https://youzan.github.io/vant/#/zh-CN/swipe" target="_blank" rel="noopener">è½®æ’­å›¾</a>é¡µé¢ï¼Œæºç ä¸Šä¸æ˜¯ç›‘å¬çš„ touch äº‹ä»¶å—ï¼Ÿä¸ºä»€ä¹ˆ pc ç«¯ä¸Šå´å¯ä»¥æ»‘åŠ¨ï¼Œä»€ä¹ˆé¬¼ï¼Ÿï¼Ÿï¼ŸğŸ§ ä»Šå¤©ç»ˆäºæ‰¾åˆ°äº†ä»–ä»¬å°è£…çš„ä¸€äº›æ–¹æ³•ï¼Œæˆ‘è§‰å¾—è¿™å¯¹æˆ‘æŒºæœ‰ç”¨çš„ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹ï¼Œæºç æ¥è‡ªäº <a href="https://github.com/youzan/vant-doc/blob/master/helper/touch-simulator.js" target="_blank" rel="noopener">https://github.com/youzan/vant-doc/blob/master/helper/touch-simulator.js</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¨¡æ‹Ÿç§»åŠ¨ç«¯ touch äº‹ä»¶</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> eventTarget</span><br><span class="line"></span><br><span class="line"><span class="comment">// polyfills</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="built_in">document</span>.createTouch) &#123;</span><br><span class="line">  <span class="built_in">document</span>.createTouch = <span class="function"><span class="keyword">function</span>(<span class="params">view, target, identifier, pageX, pageY, screenX, screenY</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// auto set</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Touch(</span><br><span class="line">      target,</span><br><span class="line">      identifier,</span><br><span class="line">      &#123;</span><br><span class="line">        pageX: pageX,</span><br><span class="line">        pageY: pageY,</span><br><span class="line">        screenX: screenX,</span><br><span class="line">        screenY: screenY,</span><br><span class="line">        clientX: pageX - <span class="built_in">window</span>.pageXOffset,</span><br><span class="line">        clientY: pageY - <span class="built_in">window</span>.pageYOffset</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="number">0</span>,</span><br><span class="line">      <span class="number">0</span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!<span class="built_in">document</span>.createTouchList) &#123;</span><br><span class="line">  <span class="built_in">document</span>.createTouchList = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> touchList = TouchList()</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="built_in">arguments</span>.length; i++) &#123;</span><br><span class="line">      touchList[i] = <span class="built_in">arguments</span>[i]</span><br><span class="line">    &#125;</span><br><span class="line">    touchList.length = <span class="built_in">arguments</span>.length</span><br><span class="line">    <span class="keyword">return</span> touchList</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * create an touch point</span></span><br><span class="line"><span class="comment"> * @constructor</span></span><br><span class="line"><span class="comment"> * @param target</span></span><br><span class="line"><span class="comment"> * @param identifier</span></span><br><span class="line"><span class="comment"> * @param pos</span></span><br><span class="line"><span class="comment"> * @param deltaX</span></span><br><span class="line"><span class="comment"> * @param deltaY</span></span><br><span class="line"><span class="comment"> * @returns &#123;Object&#125; touchPoint</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Touch = <span class="function"><span class="keyword">function</span> <span class="title">Touch</span>(<span class="params">target, identifier, pos, deltaX, deltaY</span>) </span>&#123;</span><br><span class="line">  deltaX = deltaX || <span class="number">0</span></span><br><span class="line">  deltaY = deltaY || <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>.identifier = identifier</span><br><span class="line">  <span class="keyword">this</span>.target = target</span><br><span class="line">  <span class="keyword">this</span>.clientX = pos.clientX + deltaX</span><br><span class="line">  <span class="keyword">this</span>.clientY = pos.clientY + deltaY</span><br><span class="line">  <span class="keyword">this</span>.screenX = pos.screenX + deltaX</span><br><span class="line">  <span class="keyword">this</span>.screenY = pos.screenY + deltaY</span><br><span class="line">  <span class="keyword">this</span>.pageX = pos.pageX + deltaX</span><br><span class="line">  <span class="keyword">this</span>.pageY = pos.pageY + deltaY</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * create empty touchlist with the methods</span></span><br><span class="line"><span class="comment"> * @constructor</span></span><br><span class="line"><span class="comment"> * @returns touchList</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">TouchList</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> touchList = []</span><br><span class="line"></span><br><span class="line">  touchList[<span class="string">'item'</span>] = <span class="function"><span class="keyword">function</span>(<span class="params">index</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>[index] || <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// specified by Mozilla</span></span><br><span class="line">  touchList[<span class="string">'identifiedTouch'</span>] = <span class="function"><span class="keyword">function</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>[id + <span class="number">1</span>] || <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> touchList</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Simple trick to fake touch event support</span></span><br><span class="line"><span class="comment"> * this is enough for most libraries like Modernizr and Hammer</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fakeTouchSupport</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> objs = [<span class="built_in">window</span>, <span class="built_in">document</span>.documentElement]</span><br><span class="line">  <span class="keyword">var</span> props = [<span class="string">'ontouchstart'</span>, <span class="string">'ontouchmove'</span>, <span class="string">'ontouchcancel'</span>, <span class="string">'ontouchend'</span>]</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> o = <span class="number">0</span>; o &lt; objs.length; o++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> p = <span class="number">0</span>; p &lt; props.length; p++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (objs[o] &amp;&amp; objs[o][props[p]] === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        objs[o][props[p]] = <span class="literal">null</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * only trigger touches when the left mousebutton has been pressed</span></span><br><span class="line"><span class="comment"> * @param touchType</span></span><br><span class="line"><span class="comment"> * @returns &#123;Function&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onMouse</span>(<span class="params">touchType</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">ev</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// prevent mouse events</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (ev.which !== <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// The EventTarget on which the touch point started when it was first placed on the surface,</span></span><br><span class="line">    <span class="comment">// even if the touch point has since moved outside the interactive area of that element.</span></span><br><span class="line">    <span class="comment">// also, when the target doesnt exist anymore, we update it</span></span><br><span class="line">    <span class="keyword">if</span> (ev.type === <span class="string">'mousedown'</span> || !eventTarget || (eventTarget &amp;&amp; !eventTarget.dispatchEvent)) &#123;</span><br><span class="line">      eventTarget = ev.target</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    triggerTouch(touchType, ev)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// reset</span></span><br><span class="line">    <span class="keyword">if</span> (ev.type === <span class="string">'mouseup'</span>) &#123;</span><br><span class="line">      eventTarget = <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * trigger a touch event</span></span><br><span class="line"><span class="comment"> * @param eventName</span></span><br><span class="line"><span class="comment"> * @param mouseEv</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">triggerTouch</span>(<span class="params">eventName, mouseEv</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> touchEvent = <span class="built_in">document</span>.createEvent(<span class="string">'Event'</span>)</span><br><span class="line">  touchEvent.initEvent(eventName, <span class="literal">true</span>, <span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line">  touchEvent.altKey = mouseEv.altKey</span><br><span class="line">  touchEvent.ctrlKey = mouseEv.ctrlKey</span><br><span class="line">  touchEvent.metaKey = mouseEv.metaKey</span><br><span class="line">  touchEvent.shiftKey = mouseEv.shiftKey</span><br><span class="line"></span><br><span class="line">  touchEvent.touches = getActiveTouches(mouseEv)</span><br><span class="line">  touchEvent.targetTouches = getActiveTouches(mouseEv)</span><br><span class="line">  touchEvent.changedTouches = createTouchList(mouseEv)</span><br><span class="line"></span><br><span class="line">  eventTarget.dispatchEvent(touchEvent)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * create a touchList based on the mouse event</span></span><br><span class="line"><span class="comment"> * @param mouseEv</span></span><br><span class="line"><span class="comment"> * @returns &#123;TouchList&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createTouchList</span>(<span class="params">mouseEv</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> touchList = TouchList()</span><br><span class="line">  touchList.push(<span class="keyword">new</span> Touch(eventTarget, <span class="number">1</span>, mouseEv, <span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">  <span class="keyword">return</span> touchList</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * receive all active touches</span></span><br><span class="line"><span class="comment"> * @param mouseEv</span></span><br><span class="line"><span class="comment"> * @returns &#123;TouchList&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getActiveTouches</span>(<span class="params">mouseEv</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// empty list</span></span><br><span class="line">  <span class="keyword">if</span> (mouseEv.type === <span class="string">'mouseup'</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> TouchList()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> createTouchList(mouseEv)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * TouchEmulator initializer</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">TouchEmulator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  fakeTouchSupport()</span><br><span class="line"></span><br><span class="line">  <span class="built_in">window</span>.addEventListener(<span class="string">'mousedown'</span>, onMouse(<span class="string">'touchstart'</span>), <span class="literal">true</span>)</span><br><span class="line">  <span class="built_in">window</span>.addEventListener(<span class="string">'mousemove'</span>, onMouse(<span class="string">'touchmove'</span>), <span class="literal">true</span>)</span><br><span class="line">  <span class="built_in">window</span>.addEventListener(<span class="string">'mouseup'</span>, onMouse(<span class="string">'touchend'</span>), <span class="literal">true</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// start distance when entering the multitouch mode</span></span><br><span class="line">TouchEmulator[<span class="string">'multiTouchOffset'</span>] = <span class="number">75</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> TouchEmulator()</span><br></pre></td></tr></table></figure><p>ç›´æ¥å¼•å…¥è¯¥æ–‡ä»¶ï¼Œpc ç«¯å°±å¯ä»¥å“åº”ç§»åŠ¨ç«¯çš„ <code>touchstart</code>ã€<code>touchmove</code>ã€<code>touchend</code> äº‹ä»¶äº† âœ¨ã€‚</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://xiaojun1994.top/posts/d87f7e0c.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="xiaojun1994"><meta itemprop="description" content><meta itemprop="image" content="/images/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="xiaojun's blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"> <a class="post-title-link" href="/posts/d87f7e0c.html" itemprop="url">å°æŠ€å·§å¤„ç†fixedå®šä½åå…¶å®ƒå†…å®¹è¢«è¦†ç›–çš„é—®é¢˜</a></h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">å‘è¡¨äº</span> <time title="Created: 2018-11-04 17:51:20" itemprop="dateCreated datePublished" datetime="2018-11-04T17:51:20+08:00">2018-11-04</time></span><div class="post-symbolscount"> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">å­—æ•°:</span> <span title="å­—æ•°">3k</span></div></div></header><div class="post-body" itemprop="articleBody"><p>æˆ‘ä»¬çŸ¥é“å½“å¯¹ä¸€ä¸ªå…ƒç´ è®¾ç½®äº† <code>position: fixed;</code> åï¼Œè¯¥å…ƒç´ ä¼šè„±ç¦»æ–‡æ¡£æµï¼Œä¸‹é¢çš„å†…å®¹ä¼šé¡¶ä¸Šæ¥ï¼Œå¯¼è‡´è¢«å†…å®¹è¢«é®ç›–ã€‚å¸¸è§çš„ä¸€ä¸ªåšæ³•æ˜¯è®¾ç½®ä¸‹é¢å†…å®¹çš„ <code>padding</code> æˆ– <code>margin</code>ï¼Œè™½ç„¶èƒ½è¾¾åˆ°æ•ˆæœï¼Œä½†æ˜¯æ€»å½’ä¸å®Œç¾ï¼Œç‰¹åˆ«æ˜¯å½“æˆ‘ä»¬æƒ³å°è£…ä¸€ä¸ªç»„ä»¶ç»™åˆ«äººç”¨çš„æ—¶å€™ï¼Œè¿˜å¾—è®©åˆ«äººè®¾ç½®ä¸€ä¸‹æ ·å¼ï¼Œè¿™æ ·å²‚ä¸éº»çƒ¦ï¼Œæ‰€ä»¥å°±æœ‰äº†ä¸‹é¢è¿™ä¸ªæ–¹æ³•ï¼Œä»¥æˆ‘å°è£…çš„è¿™ä¸ª <code>vue</code> <code>header</code> ç»„ä»¶ä¸ºä¾‹</p><h3 id="ç¤ºä¾‹ä»£ç "><a href="#ç¤ºä¾‹ä»£ç " class="headerlink" title="ç¤ºä¾‹ä»£ç "></a>ç¤ºä¾‹ä»£ç </h3><h4 id="template"><a href="#template" class="headerlink" title="template"></a>template</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">:class</span>=<span class="string">"classList"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"i-nav-bar__inner"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"i-nav-bar__left"</span> @<span class="attr">click</span>=<span class="string">"handleClickLeft"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">"left"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"i-nav-bar__arrow fa fa-fw fa-angle-left"</span> <span class="attr">v-if</span>=<span class="string">"leftArrow"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"i-nav-bar__text"</span> <span class="attr">v-if</span>=<span class="string">"leftText"</span>&gt;</span>&#123;&#123; leftText &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"i-nav-bar__title"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">"title"</span>&gt;</span>&#123;&#123; title &#125;&#125;<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"i-nav-bar__right"</span> @<span class="attr">click</span>=<span class="string">"handleClickRight"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">"right"</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="script"><a href="#script" class="headerlink" title="script"></a>script</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">'INavBar'</span>,</span><br><span class="line">  props: &#123;</span><br><span class="line">    title: <span class="built_in">String</span>,</span><br><span class="line">    leftArrow: <span class="built_in">Boolean</span>,</span><br><span class="line">    leftText: <span class="built_in">String</span>,</span><br><span class="line">    fixed: <span class="built_in">Boolean</span></span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    classList() &#123;</span><br><span class="line">      <span class="keyword">return</span> [</span><br><span class="line">        <span class="string">'i-nav-bar'</span>,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">'i-nav-bar--fixed'</span>: <span class="keyword">this</span>.fixed</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    handleClickLeft(ev) &#123;</span><br><span class="line">      <span class="keyword">this</span>.$emit(<span class="string">'click-left'</span>, ev)</span><br><span class="line">    &#125;,</span><br><span class="line">    handleClickRight(ev) &#123;</span><br><span class="line">      <span class="keyword">this</span>.$emit(<span class="string">'click-right'</span>, ev)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="style-scss"><a href="#style-scss" class="headerlink" title="style(scss)"></a>style(scss)</h4><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$height</span>: <span class="number">50px</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.i-nav-bar</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="variable">$height</span>;</span><br><span class="line">  &amp;__inner &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">1px</span> rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.07</span>);</span><br><span class="line">    <span class="attribute">height</span>: <span class="variable">$height</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#4a4d5a</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  &amp;__left &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    &amp;:active &#123;</span><br><span class="line">      <span class="attribute">opacity</span>: <span class="number">0.5</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.i-nav-bar__arrow</span> &#123;</span><br><span class="line">      <span class="attribute">font-size</span>: <span class="number">25px</span>;</span><br><span class="line">      <span class="attribute">margin-top</span>: -<span class="number">1px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.i-nav-bar__text</span> &#123;</span><br><span class="line">      <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">      <span class="attribute">margin-left</span>: -<span class="number">6px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  &amp;__title &#123;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#34495e</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  &amp;__right &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    &amp;:active &#123;</span><br><span class="line">      <span class="attribute">opacity</span>: <span class="number">0.5</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  &amp;--fixed &#123;</span><br><span class="line">    <span class="selector-class">.i-nav-bar__inner</span> &#123;</span><br><span class="line">      <span class="attribute">position</span>: fixed;</span><br><span class="line">      <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">      <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">      <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>å¤–é¢å¥—ä¸€ä¸ªçˆ¶å…ƒç´ ï¼Œ<code>height</code> å‡è®¾ä¸º 50pxï¼Œç„¶åæˆ‘ä»¬å¯¹é‡Œé¢è¿™ä¸ªå…ƒç´ è®¾ç½® <code>position: fixed;</code>ï¼Œå®ƒçš„ <code>height</code> ä¹Ÿè®¾ç½® 50pxï¼Œè¿™æ ·çš„è¯è™½ç„¶é‡Œé¢è„±ç¦»äº†æ–‡æ¡£æµï¼Œä½†æ˜¯çˆ¶å…ƒç´ ä¾ç„¶å æ®ç€ç©ºé—´ï¼Œæ‰€ä»¥ä¸‹é¢çš„å…ƒç´ ä¹Ÿå°±ä¸ä¼šé¡¶ä¸Šæ¥ï¼Œå½“åˆ«äººä½¿ç”¨ä½ çš„ç»„ä»¶æ—¶å†ä¹Ÿä¸ç”¨è´¹åŠ›è®¾ç½® <code>padding</code> æˆ– <code>margin</code> äº†ã€‚</p><h3 id="ä¸€äº›æ•ˆæœæˆªå›¾"><a href="#ä¸€äº›æ•ˆæœæˆªå›¾" class="headerlink" title="ä¸€äº›æ•ˆæœæˆªå›¾"></a>ä¸€äº›æ•ˆæœæˆªå›¾</h3><p>å›¾ä¸­å¤´éƒ¨æ˜¯ä¸Šé¢ç¤ºä¾‹ä»£ç çš„æ•ˆæœå›¾ï¼Œtabbar æ˜¯æˆ‘å°è£…çš„å¦ä¸€ä¸ªç»„ä»¶ï¼Œè¿™é‡Œä¸ºäº†æ¼”ç¤ºæ•ˆæœï¼Œæˆ‘æŠŠä»–ä»¬æ”¾åˆ°ä¸€èµ·</p><p><img src="https://s2.ax1x.com/2019/05/24/VFWSE9.png" alt="5mWmzX.png"></p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article></section><nav class="pagination"> <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a></nav></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div id="sidebar-dimmer"></div><div class="sidebar-inner"><section class="site-overview-wrap sidebar-panel sidebar-panel-active"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="xiaojun1994"><p class="site-author-name" itemprop="name">xiaojun1994</p><p class="site-description motion-element" itemprop="description"></p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">19</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/index.html"><span class="site-state-item-count">16</span> <span class="site-state-item-name">tags</span></a></div></nav><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/xiaojun1994" target="_blank" title="GitHub" rel="external nofollow"><i class="fa fa-fw fa-github"></i> GitHub</a></span></div><div class="links-of-blogroll motion-element links-of-blogroll-inline"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-heartbeat"></i> å‹é“¾</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"> <a href="http://laibh.top/" title="èµ–åŒå­¦" target="_blank">èµ–åŒå­¦</a></li><li class="links-of-blogroll-item"> <a href="http://xzzdll.cn/" title="John Stark" target="_blank">John Stark</a></li><li class="links-of-blogroll-item"> <a href="http://www.huyujs.com/" title="èƒ¡é›¨" target="_blank">èƒ¡é›¨</a></li></ul></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2019</span><span class="with-love" id="animate"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">xiaojun1994</span></div><div class="busuanzi-count"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="site-uv" title="Total Visitors"><i class="fa fa-user"></i><span class="busuanzi-value" id="busuanzi_value_site_uv"></span></span><span class="site-pv" title="Total Views"><i class="fa fa-eye"></i><span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/js/src/utils.js?v=6.4.1"></script><script type="text/javascript" src="/js/src/motion.js?v=6.4.1"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=6.4.1"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({model:{jsonPath:"/live2dw/assets/tororo.model.json"},display:{position:"left",hOffset:0,vOffset:0,width:250,height:250},mobile:{show:!1},log:!1,pluginJsPath:"lib/",pluginModelPath:"assets/",pluginRootPath:"live2dw/",tagMode:!1})</script></body></html>